# A test suite for your application

# I use this file to dev and test the linter

feature "My Application Feature"
actors {
    Web
    Terminal
    FileSystem
}

var TEST = "test"
env HOME

#setting: timeout_seconds = 30

settings {
  # Set a custom timeout for this test suite.
  timeout_seconds = 30
  # Specify the output directory for reports.
  report_path = "./test_reports"
  # (report_format defaults to "json" if not specified)
  # Stop the entire run as soon as one test fails.
  stop_on_failure = true
  # Specify the shell to use for the Terminal actor, defaults to bash.
  shell_path = "/bin/bash"
  expected_failures = 101
}

scenario "A basic scenario" {

    test MyTest "Testing for the linter" {

        given:
            wait >= 301s
        when:
            FileSystem create_dir "temp_data"
            FileSystem create_file "temp_data/initial.txt" with_content "setup data"
            Terminal runs "cat temp_data/initial.txt"
        then:
            Terminal output_contains "setup data"
    }

    test GetInitialData "retrieve the current state of a resource" {
        given:
            # No preconditions needed
            wait >= 0s
        when:
            Web http_get "https://httpbin.org/json"
        then:
            #Web response_status_is 200
            Web response_time is_below 1ms
            Web response_status is_in [200, 204, 600, 99]
            Web response_body_contains "slideshow"
            Web json_body has_path "/slideshow/title"
    }

    after {
        FileSystem delete_file "temp_data/initial.txt"
        FileSystem delete_dir "temp_data"
    }

}

scenario "A basic scenario" {

}